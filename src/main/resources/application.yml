spring:
  application:
    name: ms-neg-comercial-gestion-prospectos

  profiles:
    active: ${SPRING_PROFILES_ACTIVE:local}

  r2dbc:
    url: r2dbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:db_prospectos}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:postgres}
    pool:
      initial-size: 10
      max-size: 50
      max-idle-time: 30m
      max-acquire-time: 3s
      max-create-connection-time: 5s
      validation-query: SELECT 1

  flyway:
    enabled: true
    baseline-on-migrate: true
    validate-on-migrate: true
    locations: classpath:db/migration
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:db_prospectos}
    user: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:postgres}

  jackson:
    default-property-inclusion: non_null
    serialization:
      write-dates-as-timestamps: false
    deserialization:
      fail-on-unknown-properties: false
    time-zone: UTC

server:
  port: ${SERVER_PORT:8080}
  shutdown: graceful
  netty:
    connection-timeout: 30s
  compression:
    enabled: true
    mime-types: text/html,text/xml,text/plain,text/css,application/json

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
      base-path: /actuator
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true
  health:
    livenessstate:
      enabled: true
    readinessstate:
      enabled: true
  metrics:
    export:
      cloudwatch:
        namespace: AYNI/Prospectos
        enabled: ${CLOUDWATCH_METRICS_ENABLED:false}
        batch-size: 20
        step: 1m
    tags:
      application: ${spring.application.name}
      environment: ${ENVIRONMENT:dev}

logging:
  level:
    root: INFO
    com.nitro: INFO
    org.springframework.r2dbc: INFO
    io.r2dbc.postgresql: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"

springdoc:
  api-docs:
    path: /api/v1/api-docs
    enabled: true
  swagger-ui:
    path: /api/v1/swagger-ui.html
    enabled: true
    operations-sorter: method
    tags-sorter: alpha
  show-actuator: true

app:
  name: ${spring.application.name}
  version: ${project.version:1.0.0}
  description: Microservicio de Negocio - Gesti√≥n de Prospectos

  security:
    enabled: ${SECURITY_ENABLED:true}
    oauth2:
      jwk-set-uri: ${JWK_SET_URI:}

  salesforce:
    api:
      url: ${SF_API_URL:https://test.salesforce.com}
      token: ${SF_API_TOKEN:}

aws:
  region: ${AWS_REGION:us-east-1}
  s3:
    bucket-name: ${S3_BUCKET_NAME:nitro-prospectos-assets-dev}